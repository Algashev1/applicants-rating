<div class="file-upload-container">
  <div class="upload-section">
    <input type="file" (change)="onFileSelected($event)" accept=".xlsx,.xls" />
    <!-- Дата через date picker (обязательное поле) -->
    <input type="date" [(ngModel)]="selectedDate" required />
    <input type="text" [(ngModel)]="comment" placeholder="Добавить комментарий" />
    <button (click)="uploadFile()" [disabled]="!selectedFile || !selectedDate || loading">Загрузить файл</button>
  </div>

  <div *ngIf="loading" class="loader">Пожалуйста, не закрывайте страницу и дождитесь конца обработки файла...</div>

  <table class="files-table" *ngIf="!loading">
    <thead>
      <tr>
        <th>Название файла</th>
        <th>Дата загрузки</th>
        <th>Комментарий</th>
        <th>Выбранная дата</th>
        <th>Действия</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let file of files">
        <td>{{ file.originalFilename }}</td>
        <td>{{ file.uploadTimestamp | date : 'dd.MM.yyyy' }}</td>
        <td>{{ file.comment }}</td>
        <td>{{ file.selectedDate | date : 'dd.MM.yyyy' }}</td>
        <td>
          <button class="download-btn" (click)="downloadFile(file.id)"><i class="fas fa-download"></i> Скачать</button>
          <button class="delete-btn" (click)="deleteFile(file.id)"><i class="fas fa-trash"></i> Удалить</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
